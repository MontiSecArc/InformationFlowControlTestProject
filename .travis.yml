sudo: required

language: java

jdk:
  - oraclejdk8

services:
  - docker

before_install:
- docker pull thomasbuning/msa_intellij_docker_image

before_script:
- sudo apt-get install -qq -y xsltproc

script:
- mkdir $TRAVIS_BUILD_DIR/results
- docker run -v $TRAVIS_BUILD_DIR:/project thomasbuning/msa_intellij_docker_image /bin/sh -c "/opt/intellij/bin/inspect.sh /project /project/Default.xml /project/results -v2 -d /project/src"
- xsltproc $TRAVIS_BUILD_DIR/GraphQuery.xsl $TRAVIS_BUILD_DIR/results/GraphQuery.xml > $TRAVIS_BUILD_DIR/results/GraphQuery.xhtml

deploy:
  provider: pages
  skip_cleanup: true
  github_token: jcaZExUI+/ZcyaKuCNTT7Mt6x+++P0p0xa8SUvmtUEhcXfamDlpCd1zoeSvx5355Fmt0KVp+zsmghmCRALXhx46T5dZXyv4w/lZshSCmAzctLjzXaMTglf2NR750SHD2Zc/HFyuFUXNZOOKA43UQezKv2LJpFEs4GKMJKifp+s/0pGBdQjUxBFWVZ7SBydiB5YHkRXThIrGFU8poa6C4aPq5ZBNjY+dlUyFAaKTxkTOVMkqNriOIXrpgvR6YZ6zmGG+j+LmbhDOArgtATxZ5C1Bo3mW7VW5CohNsBkVpqb020luk1WAtsKdw9Lw06Q3IulCvRpbwR1IkdosoqsX/1eeDireZew8UW0pXRa0G9+Q+RG8Rio985E6ocWDbFVrs5Q/IRfXnRe7jJ6nFMUxfoEICNchMAM/9IEi7AU56FFnQtBZOf8bMSkC0MgnUFP4up9AMUX1+KvwQljhwCXH4g1TFM9aclEhUnLfexdlD8WOSj092Av7x57Vy0D0GRA/vYu5jQU7BzNzEtk7hEIR/CMrGwURaPgibubkIFwF85LpC1CFThjC2BqCVX3fEh87V+lfZC1CfpHlaSgSD1w8LBMEY68Pd5BBFoZm92+Kw2TIh2thc0eIXbJx8Cg6kfsEaU8RDU78RIRPW9Hj3UcIGtlGSXBzHD3ii1Y2Q50qbdls=
  local_dir: $TRAVIS_BUILD_DIR/results
  on:
    branch: master
